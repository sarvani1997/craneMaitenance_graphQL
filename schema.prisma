// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url      = env("DATABASE_URL")
  provider = "sqlite"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id                      Int             @id @default(autoincrement())
  name                    String          @default("")
  password                String?
  phone                   String          @unique @default("")
  role                    String          @default("")
  from_CheckedDetail_user CheckedDetail[] @relation("CheckedDetail_user")
}

model CraneEquipment {
  id                           Int             @id @default(autoincrement())
  name                         String          @default("")
  type                         String          @default("")
  from_CheckedDetail_equipment CheckedDetail[] @relation("CheckedDetail_equipment")
}

model Check {
  id                       Int             @id @default(autoincrement())
  name                     String          @default("")
  checkHours               Int?
  checkDays                Int?
  shutdownRequired         Boolean         @default(false)
  checkPoints              CheckPoint[]    @relation("Check_checkPoints")
  from_CheckedDetail_check CheckedDetail[] @relation("CheckedDetail_check")
}

model CheckPointGroup {
  id          Int          @id @default(autoincrement())
  name        String       @default("")
  checkPoints CheckPoint[] @relation("CheckPoint_checkPointGroup")
}

model CheckPoint {
  id                             Int              @id @default(autoincrement())
  name                           String           @default("")
  checkPointGroup                CheckPointGroup? @relation("CheckPoint_checkPointGroup", fields: [checkPointGroupId], references: [id])
  checkPointGroupId              Int?             @map("checkPointGroup")
  from_Check_checkPoints         Check[]          @relation("Check_checkPoints")
  from_CheckedDetail_checkPoints CheckedDetail[]  @relation("CheckedDetail_checkPoints")

  @@index([checkPointGroupId])
}

model Part {
  id   Int    @id @default(autoincrement())
  name String @default("")
}

model CheckedDetail {
  id          Int             @id @default(autoincrement())
  date        DateTime?
  readingMain Int?
  readingGen  Int?
  worksDone   String          @default("")
  check       Check?          @relation("CheckedDetail_check", fields: [checkId], references: [id])
  checkId     Int?            @map("check")
  checkPoints CheckPoint[]    @relation("CheckedDetail_checkPoints")
  user        User?           @relation("CheckedDetail_user", fields: [userId], references: [id])
  userId      Int?            @map("user")
  equipment   CraneEquipment? @relation("CheckedDetail_equipment", fields: [equipmentId], references: [id])
  equipmentId Int?            @map("equipment")

  @@index([checkId])
  @@index([userId])
  @@index([equipmentId])
}